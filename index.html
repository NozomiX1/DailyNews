<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily AI Intelligence | HarmonyOS Edition</title>
    
    <link rel="stylesheet" href="https://s1.hdslb.com/bfs/static/jinkela/long/font/HarmonyOS_Sans_SC.css" />
    
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* --- æ ¸å¿ƒå˜é‡ --- */
        :root {
            --bg-color: #F5F7FA;
            --text-color: #1F2937;
            --accent-color: #2563EB;
            --secondary-text: #64748B;
            --line-color: #E2E8F0;
            --font-stack: 'HarmonyOS Sans SC', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-stack);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        [v-cloak] { display: none; }

        h1, h2, h3, h4, button { font-family: var(--font-stack); }
        h1, h2, h3 { font-weight: 700; letter-spacing: -0.02em; }

        /* --- çº¹ç†èƒŒæ™¯ --- */
        .grain-overlay {
            position: fixed; inset: 0; pointer-events: none; z-index: 9999; opacity: 0.03;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* --- Markdown æ ·å¼ --- */
        .markdown-body { color: #334155; font-size: 15px; line-height: 1.8; font-family: var(--font-stack); }
        .markdown-body h1 { font-size: 1.8rem; border-bottom: 1px solid var(--line-color); padding-bottom: 0.5rem; margin-top: 1.5rem; color: #111; }
        .markdown-body h2 { font-size: 1.4rem; border-left: 4px solid var(--accent-color); padding-left: 10px; margin-top: 2rem; color: #1f2937; }
        .markdown-body a { color: var(--accent-color); text-decoration: none; border-bottom: 1px dashed var(--accent-color); }
        .markdown-body a:hover { border-bottom-style: solid; background-color: rgba(37, 99, 235, 0.05); }
        .markdown-body pre { background: #1e293b; color: #e2e8f0; padding: 1rem; border-radius: 8px; overflow-x: auto; font-family: monospace; margin: 1rem 0; }
        .markdown-body code { background-color: #f1f5f9; padding: 0.2em 0.4em; border-radius: 4px; font-family: monospace; color: #ef4444; border: 1px solid #e5e7eb; }
        .markdown-body blockquote { border-left: 4px solid var(--line-color); padding-left: 1rem; color: var(--secondary-text); background: #fff; padding: 0.5rem 1rem; margin: 1rem 0; }

        /* --- æ—¥å†ç»„ä»¶è¦†ç›–æ ·å¼ --- */
        .el-calendar { background: transparent; --el-calendar-border: none; }
        .el-calendar__header { padding: 0; border-bottom: 1px solid var(--line-color); margin-bottom: 10px; }
        .el-calendar__body { padding: 0; }
        .el-calendar-table td { border: none; }
        .el-calendar-table .el-calendar-day { height: 40px; padding: 0; display: flex; align-items: center; justify-content: center; border-radius: 8px; transition: all 0.2s; }
        .el-calendar-table .el-calendar-day:hover { background-color: #F1F5F9; }
        .el-calendar-table td.is-selected .el-calendar-day { background-color: #DBEAFE; color: var(--accent-color); font-weight: 800; }

        /* --- æ–‡ç« å¡ç‰‡æ ·å¼ --- */
        .journal-section { padding: 1rem 0; }
        .section-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--line-color); }
        .section-title { font-weight: 700; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-color); }

        .article-list { display: flex; flex-direction: column; gap: 1rem; }

        .article-item {
            display: grid; grid-template-columns: 1fr 3fr; gap: 2rem; padding: 2rem;
            background: white; border: 1px solid transparent; border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            cursor: pointer; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            opacity: 0; transform: translateY(20px);
        }
        
        .article-item:hover { transform: translateY(-2px); box-shadow: 0 10px 30px -10px rgba(37, 99, 235, 0.15); border-color: #BFDBFE; }

        /* é“¾æ¥æ ·å¼é‡ç½® */
        .article-item { color: inherit; text-decoration: none; }

        .article-meta { font-size: 0.85rem; color: var(--secondary-text); display: flex; flex-direction: column; gap: 0.5rem; font-weight: 500; }
        .article-title { font-size: 1.6rem; margin-bottom: 0.5rem; line-height: 1.3; display: flex; justify-content: space-between; align-items: flex-start; color: #111; }
        .article-title-text { transition: color 0.2s; }
        .article-item:hover .article-title-text { color: var(--accent-color); }

        .article-excerpt { font-size: 1rem; color: #555; max-width: 90%; margin-top: 0.8rem; }
        .article-tags { margin-top: 1.5rem; display: flex; gap: 0.8rem; }
        .tag { font-size: 0.75rem; font-weight: 600; padding: 0.2rem 0.8rem; background: #F8FAFC; border-radius: 20px; color: var(--secondary-text); transition: all 0.2s; }
        .article-item:hover .tag { background: #EFF6FF; color: var(--accent-color); }

        .article-arrow { font-size: 1.5rem; opacity: 0.3; transition: all 0.3s; color: var(--text-color); }
        .article-item:hover .article-arrow { opacity: 1; color: var(--accent-color); transform: translateX(5px); }

        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 768px) {
            .article-item { grid-template-columns: 1fr; gap: 1rem; padding: 1.5rem; }
            .article-title { font-size: 1.3rem; }
            .el-calendar-table .el-calendar-day { height: 36px; }
        }
    </style>

    <script type="importmap">
    {
      "imports": {
        "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js",
        "element-plus": "https://unpkg.com/element-plus/dist/index.full.mjs",
        "marked": "https://unpkg.com/marked/lib/marked.esm.js"
      }
    }
    </script>
</head>
<body>
    <div class="grain-overlay"></div>

    <div id="app" class="min-h-screen py-8 px-4 sm:px-8 max-w-[1280px] mx-auto space-y-8" v-cloak>
        
        <header>
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end border-b border-[var(--line-color)] pb-6 mb-8 gap-4">
                <div>
                    <div class="text-xs font-bold uppercase tracking-widest text-[var(--accent-color)] mb-2">Est. 2026 â€” AI Log</div>
                    <h1 class="text-3xl md:text-4xl text-gray-900 tracking-tight">Daily AI <span class="text-[var(--accent-color)]">Intelligence</span></h1>
                </div>
                <div class="flex items-center gap-3">
                    <div class="text-xs px-3 py-1.5 rounded-full bg-white border border-[var(--line-color)] text-[var(--secondary-text)] font-medium">
                        {{ isLocal ? 'ğŸŸ¢ Local Env' : 'ğŸ”µ Online' }}
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-3 gap-4 md:gap-8 mb-12">
                <div class="p-5 rounded-xl bg-white border border-[var(--line-color)] shadow-sm hover:shadow-md transition-shadow">
                     <div class="text-xs text-[var(--secondary-text)] uppercase font-bold tracking-wider mb-1">Total Papers</div>
                    <div class="text-2xl md:text-3xl font-bold text-gray-900">DAILY</div>
                </div>
                <div class="p-5 rounded-xl bg-white border border-[var(--line-color)] shadow-sm hover:shadow-md transition-shadow">
                    <div class="text-xs text-[var(--secondary-text)] uppercase font-bold tracking-wider mb-1">Github Repos</div>
                    <div class="text-2xl md:text-3xl font-bold text-gray-900">TREND</div>
                </div>
                 <div class="p-5 rounded-xl bg-white border border-[var(--line-color)] shadow-sm hover:shadow-md transition-shadow">
                    <div class="text-xs text-[var(--secondary-text)] uppercase font-bold tracking-wider mb-1">Status</div>
                    <div class="text-lg md:text-xl font-bold text-green-600 flex items-center gap-2">
                        <span class="relative flex h-3 w-3">
                          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                          <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                        </span>
                        UPDATE
                    </div>
                </div>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-[340px_1fr] gap-10 items-start">
            <aside class="sticky top-8">
                <div class="section-header">
                    <span class="section-title">Timeline</span>
                </div>
                <div class="bg-white rounded-2xl p-4 border border-[var(--line-color)] shadow-sm">
                    
                    <el-calendar v-model="currentDate" ref="calendarRef">
                        <template #header="{ date }">
                            <div class="flex justify-between items-center w-full px-1 py-1 mb-2">
                                <span class="text-lg font-bold text-gray-800 tracking-tight">
                                    {{ date }}
                                </span>
                                <div class="flex items-center gap-1">
                                    <button @click="adjustDate('prev-month')" class="p-1.5 hover:bg-gray-100 rounded text-gray-400 hover:text-[var(--accent-color)] transition-colors text-xs font-mono" title="ä¸Šä¸ªæœˆ">
                                        &lt;&lt;
                                    </button>
                                    <button @click="adjustDate('prev-day')" class="p-1.5 hover:bg-gray-100 rounded text-gray-500 hover:text-[var(--accent-color)] transition-colors text-xs font-mono font-bold" title="æ˜¨å¤©">
                                        &lt;
                                    </button>
                                    <button @click="adjustDate('today')" class="px-2 py-1 mx-0.5 text-xs bg-gray-50 border border-[var(--line-color)] rounded hover:border-[var(--accent-color)] hover:text-[var(--accent-color)] transition-all font-medium text-gray-600">
                                        Today
                                    </button>
                                    <button @click="adjustDate('next-day')" class="p-1.5 hover:bg-gray-100 rounded text-gray-500 hover:text-[var(--accent-color)] transition-colors text-xs font-mono font-bold" title="æ˜å¤©">
                                        &gt;
                                    </button>
                                    <button @click="adjustDate('next-month')" class="p-1.5 hover:bg-gray-100 rounded text-gray-400 hover:text-[var(--accent-color)] transition-colors text-xs font-mono" title="ä¸‹ä¸ªæœˆ">
                                        &gt;&gt;
                                    </button>
                                </div>
                            </div>
                        </template>
                        
                        <template #date-cell="{ data }">
                            <div class="w-full h-full flex items-center justify-center text-sm font-medium">
                                {{ data.day.split('-')[2] }}
                            </div>
                        </template>
                    </el-calendar>

                </div>
            </aside>

            <section class="journal-section">
                <div class="section-header">
                    <span class="section-title">Entries for {{ formattedDate }}</span>
                    <span class="font-mono text-xs text-[var(--secondary-text)] bg-gray-100 px-2 py-1 rounded">output/{{ datePath }}/</span>
                </div>

                <div v-if="loading" class="py-24 flex flex-col items-center justify-center text-[var(--secondary-text)]">
                    <div class="animate-spin rounded-full h-10 w-10 border-[3px] border-t-[var(--accent-color)] border-gray-200 mb-4"></div>
                    <p class="font-medium">Loading Intelligence...</p>
                </div>

                <div v-else-if="isFileProtocol" class="p-6 rounded-xl border border-red-200 bg-red-50 text-red-800">
                    <div class="flex items-center gap-2 mb-2 font-bold text-lg">âš ï¸ è¿è¡Œç¯å¢ƒè­¦å‘Š</div>
                    <p class="mb-2">æµè§ˆå™¨å®‰å…¨ç­–ç•¥ç¦æ­¢ç›´æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ (file://)ã€‚</p>
                    <p>è¯·åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼š</p>
                    <code class="block mt-2 font-mono text-sm bg-white p-3 rounded border border-red-100">python -m http.server 8000</code>
                    <p class="mt-2">ç„¶åè®¿é—® <a href="http://localhost:8000" class="underline font-bold">http://localhost:8000</a></p>
                </div>
                
                <div v-else-if="hasAnyData" class="article-list">

                    <a v-if="data.report" :href="`viewer.html?file=${datePath}/daily_report.md`" target="_blank" class="article-item">
                        <div class="article-meta">
                            <span>{{ formattedDate }}</span>
                            <span>DAILY DIGEST</span>
                        </div>
                        <div class="article-content">
                            <h3 class="article-title">
                                <span class="article-title-text">æ¯æ—¥ AI æƒ…æŠ¥ç®€æŠ¥</span>
                                <span class="article-arrow">â†’</span>
                            </h3>
                            <div class="article-excerpt">
                                æ±‡æ€»ä»Šæ—¥å…¨çƒ AI è¡Œä¸šæ ¸å¿ƒåŠ¨æ€ã€æŠ€æœ¯çªç ´ä¸å¸‚åœºæ–°é—»ã€‚
                            </div>
                            <div class="article-tags">
                                <span class="tag">#News</span><span class="tag">#Industry</span>
                            </div>
                        </div>
                    </a>

                    <a v-if="data.trending" :href="`viewer.html?file=${datePath}/github_trending.md`" target="_blank" class="article-item">
                        <div class="article-meta">
                            <span>{{ formattedDate }}</span>
                            <span>OPEN SOURCE</span>
                        </div>
                        <div class="article-content">
                            <h3 class="article-title">
                                <span class="article-title-text">GitHub Trending Projects</span>
                                <span class="article-arrow">â†’</span>
                            </h3>
                            <div class="article-excerpt">
                                å‘ç°ä»Šæ—¥æœ€çƒ­é—¨çš„ AI å¼€æºé¡¹ç›®ã€å·¥å…·åº“ä¸æ¡†æ¶æ›´æ–°ã€‚
                            </div>
                            <div class="article-tags">
                                <span class="tag">#Python</span><span class="tag">#LLM</span>
                            </div>
                        </div>
                    </a>

                    <a v-if="data.papers" :href="`viewer.html?file=${datePath}/papers/papers_summary.md`" target="_blank" class="article-item">
                        <div class="article-meta">
                            <span>{{ formattedDate }}</span>
                            <span>RESEARCH</span>
                        </div>
                        <div class="article-content">
                            <h3 class="article-title">
                                <span class="article-title-text">ArXiv æ¯æ—¥è®ºæ–‡ç²¾é€‰</span>
                                <span class="article-arrow">â†’</span>
                            </h3>
                            <div class="article-excerpt">
                                ç”„é€‰ä»Šæ—¥å‘å¸ƒçš„ High Impact å­¦æœ¯è®ºæ–‡ï¼Œæ¶µç›– LLMã€CV ç­‰é¢†åŸŸã€‚
                            </div>
                            <div class="article-tags">
                                <span class="tag">#Research</span><span class="tag">#DeepLearning</span>
                            </div>
                        </div>
                    </a>

                    <!-- è®ºæ–‡ç¬”è®°å¡ç‰‡ -->
                    <a v-for="note in data.paperNotes"
                       :key="note.id"
                       :href="note.url"
                       target="_blank"
                       class="article-item">
                        <div class="article-meta">
                            <span>{{ formattedDate }}</span>
                            <span>PAPER NOTE</span>
                        </div>
                        <div class="article-content">
                            <h3 class="article-title">
                                <span class="article-title-text">{{ note.title }}</span>
                                <span class="article-arrow">â†’</span>
                            </h3>
                            <div class="article-excerpt">
                                ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†ç¬”è®°
                            </div>
                            <div class="article-tags">
                                <span class="tag">{{ note.id }}</span>
                                <span class="tag">#Research</span>
                            </div>
                        </div>
                    </a>

                </div>

                 <div v-else class="py-32 flex flex-col items-center justify-center text-[var(--secondary-text)] opacity-50">
                    <div class="text-6xl mb-4 font-bold">âˆ…</div>
                    <p class="text-xl font-medium">No Intelligence Found</p>
                    <p class="text-sm mt-2 font-mono">Target: output/{{ datePath }}/</p>
                </div>

            </section>
        </main>

        <footer class="text-center text-[var(--secondary-text)] text-sm py-10 border-t border-[var(--line-color)]">
            <p>&copy; 2026 AI Intelligence Daily. Powered by HarmonyOS Design.</p>
        </footer>

    </div>

    <script type="module">
        import { createApp, ref, computed, watch, onMounted, reactive, nextTick } from 'vue';
        import ElementPlus from 'element-plus';
        import locale from 'https://unpkg.com/element-plus/dist/locale/zh-cn.mjs'; 
        import { marked } from 'marked';

        const app = createApp({
            setup() {
                const currentDate = ref(new Date());
                const calendarRef = ref(); // ç»‘å®šæ—¥å†ç»„ä»¶å¼•ç”¨
                const loading = ref(false);
                
                // æ£€æŸ¥æ˜¯å¦æœ¬åœ°ç¯å¢ƒ (localhost æˆ– 127.0.0.1)
                const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
                // æ£€æŸ¥æ˜¯å¦æ˜¯ file:// åè®® (ä¼šå¯¼è‡´ fetch å¤±è´¥)
                const isFileProtocol = window.location.protocol === 'file:';

                const data = reactive({ report: null, trending: null, papers: null, paperNotes: [] });

                // è®¡ç®—è·¯å¾„ï¼šYYYY-MM-DD
                const datePath = computed(() => {
                    const y = currentDate.value.getFullYear();
                    const m = String(currentDate.value.getMonth() + 1).padStart(2, '0');
                    const d = String(currentDate.value.getDate()).padStart(2, '0');
                    return `${y}-${m}-${d}`;
                });

                // æ˜¾ç¤ºç”¨æ—¥æœŸï¼š2026å¹´2æœˆ2æ—¥ æ˜ŸæœŸä¸€
                const formattedDate = computed(() => {
                    return currentDate.value.toLocaleDateString('zh-CN', { 
                        year: 'numeric', month: 'long', day: 'numeric', weekday: 'long'
                    });
                });

                const hasAnyData = computed(() => data.report || data.trending || data.papers || data.paperNotes.length > 0);

                // æ¸²æŸ“ Papersï¼ˆå«ç¬”è®°é“¾æ¥ï¼‰
                const renderedPapers = computed(() => {
                    if (!data.papers) return null;
                    // ä¸ºæ¯ç¯‡è®ºæ–‡æ’å…¥"æŸ¥çœ‹è¯¦ç»†ç¬”è®°"é“¾æ¥
                    return data.papers.replace(
                        /(<h3>.*?arxiv\.org\/abs\/(\d+\.\d+).*?<\/h3>)/gi,
                        (match, p1, arxivId) => {
                            return p1 + `<p class="mt-2"><a href="./viewer.html?file=${datePath.value}/papers/papers_note_${arxivId}.md" target="_blank" class="inline-flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm font-medium hover:bg-blue-100 transition-colors">ğŸ“„ æŸ¥çœ‹è¯¦ç»†ç¬”è®°</a></p>`;
                        }
                    );
                });

                // æå– arXiv ID
                const extractArxivIds = (papersHtml) => {
                    const arxivLinks = papersHtml.match(/arxiv\.org\/abs\/(\d+\.\d+)/gi) || [];
                    return [...new Set(arxivLinks.map(link => link.match(/(\d+\.\d+)$/)[0]))];
                };

                // è·å–å•ä¸ªè®ºæ–‡ç¬”è®°
                const fetchPaperNote = async (datePath, arxivId) => {
                    try {
                        const url = `./output/${datePath}/papers/papers_note_${arxivId}.md?t=${Date.now()}`;
                        const res = await fetch(url);
                        if (!res.ok) return null;

                        const buffer = await res.arrayBuffer();
                        const decoder = new TextDecoder('utf-8');
                        const text = decoder.decode(buffer);

                        const titleMatch = text.match(/^#\s+(.+)$/m);
                        const title = titleMatch ? titleMatch[1] : `Paper ${arxivId}`;

                        return {
                            id: arxivId,
                            title: title,
                            url: `viewer.html?file=${datePath}/papers/papers_note_${arxivId}.md`
                        };
                    } catch (e) {
                        return null;
                    }
                };

                // æ—¥å†å¯¼èˆªé€»è¾‘ (æ˜¨å¤©ã€æ˜å¤©ã€ä¸Šæœˆã€ä¸‹æœˆ)
                const adjustDate = (type) => {
                    if (!calendarRef.value) return;
                    
                    if (type === 'prev-month') calendarRef.value.selectDate('prev-month');
                    else if (type === 'next-month') calendarRef.value.selectDate('next-month');
                    else if (type === 'today') calendarRef.value.selectDate('today');
                    else {
                        // å¤„ç†å¤©æ•°åŠ å‡
                        const d = new Date(currentDate.value);
                        if (type === 'prev-day') d.setDate(d.getDate() - 1);
                        else if (type === 'next-day') d.setDate(d.getDate() + 1);
                        currentDate.value = d;
                    }
                };

                // åˆ—è¡¨åŠ¨ç”»
                let observer;
                const setupIntersectionObserver = () => {
                    if (observer) observer.disconnect();
                    observer = new IntersectionObserver((entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                entry.target.style.animation = `fadeUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards`;
                                observer.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.1, rootMargin: "0px 0px -50px 0px" });
                    
                    document.querySelectorAll('.article-item').forEach(item => observer.observe(item));
                };

                // è·å–æ•°æ®æ ¸å¿ƒé€»è¾‘
                const fetchAllData = async (pathStr) => {
                    if (isFileProtocol) return; // å¦‚æœç›´æ¥åŒå‡»æ‰“å¼€ htmlï¼Œåœæ­¢è¯·æ±‚

                    loading.value = true;

                    // é‡ç½®æ•°æ®
                    data.report = null;
                    data.trending = null;
                    data.papers = null;
                    data.paperNotes = [];

                    const baseUrl = `./output/${pathStr}`;
                    const fetchFile = async (url) => {
                        try {
                            const res = await fetch(url + `?t=${Date.now()}`); // åŠ ä¸Šæ—¶é—´æˆ³é˜²ç¼“å­˜
                            if (res.ok) return marked.parse(await res.text());
                        } catch (e) {}
                        return null;
                    };

                    // å¹¶å‘è¯·æ±‚
                    const [report, trending, papers] = await Promise.all([
                        fetchFile(`${baseUrl}/daily_report.md`),
                        fetchFile(`${baseUrl}/github_trending.md`),
                        fetchFile(`${baseUrl}/papers/papers_summary.md`)
                    ]);

                    data.report = report;
                    data.trending = trending;
                    data.papers = papers;

                    // æå– arXiv ID å¹¶è·å–è®ºæ–‡ç¬”è®°
                    if (papers) {
                        const arxivIds = extractArxivIds(papers);
                        const notes = await Promise.all(
                            arxivIds.map(id => fetchPaperNote(pathStr, id))
                        );
                        data.paperNotes = notes.filter(n => n !== null);
                    }

                    loading.value = false;

                    // æ•°æ®åŠ è½½å®Œåï¼Œåˆå§‹åŒ–åŠ¨ç”»
                    nextTick(() => {
                        if (hasAnyData.value) setupIntersectionObserver();
                    });
                };

                watch(datePath, (newVal) => fetchAllData(newVal));
                
                onMounted(() => {
                    fetchAllData(datePath.value);
                });

                return {
                    currentDate, calendarRef, datePath, formattedDate, data, loading, hasAnyData,
                    isFileProtocol, isLocal, adjustDate, renderedPapers
                };
            }
        });

        app.use(ElementPlus, { locale });
        app.mount('#app');
    </script>
</body>
</html>